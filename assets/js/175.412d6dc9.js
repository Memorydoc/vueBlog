(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{448:function(a,t,s){"use strict";s.r(t);var n=s(10),r=Object(n.a)({},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"javaå¯¹è±¡å¤´ä¿¡æ¯"}},[a._v("JAVAå¯¹è±¡å¤´ä¿¡æ¯")]),a._v(" "),s("p",[a._v("å¯¹è±¡å¤´ã€å®ä¾‹æ•°æ®å’Œå¯¹é½å¡«å……ã€‚\nMarkWord\nÂ  Â  Mark Wordå½“ä¸­åŒ…æ‹¬ï¼Œå¯¹è±¡çš„hashCodeï¼Œåˆ†ä»£å¹´é¾„ï¼Œé”æ ‡è®°ä½ï¼Œæ˜¯å¦æŒæœ‰åå‘é”ï¼Œåå‘çº¿ç¨‹id, åå‘æ—¶é—´æˆ³")]),a._v(" "),s("p",[a._v("HashCodeÂ å¦‚æœæ²¡æœ‰é‡å†™hashCodeæ–¹æ³•ï¼Œé‚£ä¹ˆå°±æ˜¯Objectå½“ä¸­hashCodeæ–¹æ³•ç”Ÿæˆçš„å€¼")]),a._v(" "),s("p",[a._v("åˆ†ä»£å¹´é¾„ï¼šè¿™ä¸ªæ˜¯ç”¨æ¥è®°å½•å¯¹è±¡Survivorçš„æ¬¡æ•°ï¼Œå³å­˜æ´»æ¬¡æ•°ï¼Œæ¯æ¬¡å‘ç”ŸMinorGCæ—¶ï¼Œå¦‚æœå¯¹è±¡å­˜æ´»ï¼Œä¼šå°†å…¶åˆ†ä»£å¹´é¾„åŠ 1ï¼Œå¦‚æœåˆ†ä»£å¹´é¾„è¶…è¿‡äº†è®¾å®šçš„å€¼ï¼Œä¼šå°†å…¶ç§»åŠ¨åˆ°è€å¹´ä»£åŒºåŸŸã€‚")]),a._v(" "),s("p",[a._v("é”æ ‡è®°ä½ï¼šç”¨æ¥æ ‡è¯†åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“å‰å¯¹è±¡æ‰€æŒæœ‰çš„é”ç±»å‹ï¼Œæ˜¯è½»é‡çº§é”ï¼Œè¿˜æ˜¯é‡é‡çº§é”ï¼Œè¿˜æ˜¯åå‘é”ï¼Œæˆ–è€…è¯´æ˜¯GCæ ‡è®°")]),a._v(" "),s("p",[a._v("åå‘çº¿ç¨‹id:æŒæœ‰åå‘é”çš„çº¿ç¨‹id")]),a._v(" "),s("p",[a._v("åå‘æ—¶é—´æˆ³ï¼šä¿å­˜åå‘æ—¶é—´æˆ³")]),a._v(" "),s("p",[a._v("ç±»å‹æŒ‡é’ˆ\nÂ  Â ç±»å‹æŒ‡é’ˆä¸»è¦æ˜¯å­˜å‚¨å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆï¼Œé€šè¿‡è¿™ä¸ªæŒ‡é’ˆå¯ä»¥çŸ¥é“æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚")]),a._v(" "),s("p",[a._v("HotSpotåŒæ—¶MarkOopæ¥å®ç°å¯¹è±¡å¤´ï¼Œå…·ä½“å®ç°ä¿å­˜åœ¨markOop.hppæ–‡ä»¶å½“ä¸­ã€‚")]),a._v(" "),s("h2",{attrs:{id:"å¸¸ç”¨å‘½ä»¤"}},[a._v("å¸¸ç”¨å‘½ä»¤")]),a._v(" "),s("ul",[s("li",[a._v("å°†Javaæ–‡ä»¶ç¼–è¯‘æˆ"),s("code",[a._v(".class")]),a._v(" æ–‡ä»¶")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("javac xxx.java\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("ç¼–è¯‘åçš„æ–‡ä»¶")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[a._v("æ¼±å£•   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v(" \n  \n \n   "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("init"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("V")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Code")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("LineNumberTable")]),a._v(" math "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("I")]),a._v(" main "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Ljava")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("lang"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("V")]),a._v(" \n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SourceFile")]),a._v(" \n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Demo1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("java\f   com"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("xiangxue"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("spring"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("cap1"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Demo1")]),a._v("\f \n\v java"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("lang"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Object")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("            \b        "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),a._v(""),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),a._v("   \t         \n\v  \b   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("     \n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(""),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("`\nh"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(""),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),a._v("   \t            \v \b \t \f \n \b   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("     "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),a._v(""),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Y")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),a._v(""),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("L")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),a._v(""),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("W")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),a._v("   \t       \f \b \n\n        \t  \t \t\t\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br")])]),s("ul",[s("li",[s("code",[a._v(".class")]),a._v(" æ–‡ä»¶ ç¼–è¯‘æˆ æŒ‡ä»¤æ–‡ä»¶ javap -c xxx.class > xxx.txt\nç¼–è¯‘åçš„æ–‡ä»¶")])]),a._v(" "),s("div",{staticClass:"language-txt line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('Compiled from "Demo1.java"\npublic class com.xiangxue.spring.cap1.Demo1 {\n public com.xiangxue.spring.cap1.Demo1();\n   Code:\n      0: aload_0\n      1: invokespecial #1                  // Method java/lang/Object."<init>":()V\n      4: return\n\n public int math();\n   Code:\n      0: iconst_1 //å°†ç¬¬ä¸€ä¸ªint ç±»å‹çš„å€¼æ”¾å…¥æ ˆé¡¶\n      1: istore_1 // å°†ç¬¬ä¸€ä¸ªint ç±»å‹çš„å€¼ æ”¾åˆ° å±€éƒ¨å˜é‡è¡¨ã€‚ç›¸å½“äºå½“å‰å€¼åœ¨æ ˆé¡¶çš„å€¼å‰ªè´´åˆ° å±€éƒ¨å˜é‡è¡¨\n      2: iconst_2 //å°†ç¬¬äºŒä¸ªint ç±»å‹çš„å€¼æ”¾å…¥æ ˆé¡¶\n      3: istore_2 // å°†ç¬¬äºŒä¸ªint ç±»å‹çš„å€¼ æ”¾åˆ° å±€éƒ¨å˜é‡è¡¨ã€‚ç›¸å½“äºå½“å‰å€¼åœ¨æ ˆé¡¶çš„å€¼å‰ªè´´åˆ° å±€éƒ¨å˜é‡è¡¨\n      4: iload_1 // å°† ç¬¬ä¸€ä¸ªintç±»å‹çš„å€¼ä» å±€éƒ¨å˜é‡è¡¨å¤åˆ¶åˆ° æ“ä½œæ•°æ ˆæ ˆé¡¶ å‹æ ˆ\n      5: iload_2\n      6: iadd   //  å» cpuä¸­æ‰§è¡Œ\n      7: bipush        10\n      9: imul\n     10: istore_3\n     11: iload_3\n     12: ireturn   // å°†å€¼è¿”å›\n\n public static void main(java.lang.String[]);\n   Code:\n      0: new           #2                  // class com/xiangxue/spring/cap1/Demo1\n      3: dup\n      4: invokespecial #3                  // Method "<init>":()V\n      7: astore_1\n      8: aload_1\n      9: invokevirtual #4                  // Method math:()I\n     12: pop\n     13: return\n}\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br")])]),s("p",[a._v("å…·ä½“çš„æŒ‡ä»¤åˆ†æå¯ä»¥å‚è€ƒ"),s("a",{attrs:{href:"https://www.jianshu.com/p/d64a5dcccaa5",target:"_blank",rel:"noopener noreferrer"}},[a._v("æŒ‡ä»¤é›†"),s("OutboundLink")],1),a._v("\nå…·ä½“çš„æŒ‡ä»¤å°±ä¸åˆ†æäº†ï¼Œ  è¿‡ç¨‹å°±æ˜¯å°† æ•°æ¨é€è‡³æ ˆé¡¶ï¼Œ")]),a._v(" "),s("ul",[s("li",[a._v("å¯¼å‡ºdumpæ–‡ä»¶\nè¿™é‡Œæ˜¯é’ˆå¯¹ å†…å­˜æº¢å‡ºé”™è¯¯ï¼Œå¯ä»¥ä¸å†™ "),s("code",[a._v("-XX:+HeapDumpOnOutOfMemoryError")])])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("-Xms10m\n-Xmx10m\n-XX:+PrintGCDetails\n-XX:+HeapDumpOnOutOfMemoryError\n-XX:HeapDumpPath"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("D:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("outdump.dump\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("ul",[s("li",[a._v("jps æŸ¥çœ‹è¿›ç¨‹pid")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5584")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("11668")]),a._v(" Launcher\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12408")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20248")]),a._v(" Main\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1420")]),a._v(" Jps\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("ul",[s("li",[a._v("jstack pid   æŸ¥çœ‹æ ˆä¿¡æ¯")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2019")]),a._v("-09-02 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),a._v(":25:32\nFull thread dump OpenJDK "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("64")]),a._v("-Bit Server VM "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("25.202")]),a._v("-b49 mixed mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(":\n\n"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"JobScheduler FJ pool 5/7"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#773 daemon prio=4 os_prio=-1 tid=0x000000001df81800 nid=0x3da4 waiting on condition [0x000000006db0f000]")]),a._v("\n   java.lang.Thread.State: TIMED_WAITING "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("parking"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat sun.misc.Unsafe.park"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Native Method"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\t- parking to "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wait")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("0x000000074a292b0"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("8")]),a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a java.util.concurrent.ForkJoinPool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.ForkJoinPool.awaitWork"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ForkJoinPool.java:1824"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.ForkJoinPool.runWorker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ForkJoinPool.java:1693"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.ForkJoinWorkerThread.run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ForkJoinWorkerThread.java:157"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Process I/O pool 60"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#770 daemon prio=4 os_prio=-1 tid=0x000000001df89800 nid=0x489c waiting on condition [0x000000006d20f000]")]),a._v("\n   java.lang.Thread.State: TIMED_WAITING "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("parking"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat sun.misc.Unsafe.park"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Native Method"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\t- parking to "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wait")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("0x000000074b0c722"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("0")]),a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a java.util.concurrent.SynchronousQueue"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TransferStack")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.locks.LockSupport.parkNanos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("LockSupport.java:215"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.SynchronousQueue"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TransferStack")]),a._v(".awaitFulfill"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SynchronousQueue.java:460"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.SynchronousQueue"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TransferStack")]),a._v(".transfer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SynchronousQueue.java:362"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.SynchronousQueue.poll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SynchronousQueue.java:941"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.ThreadPoolExecutor.getTask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ThreadPoolExecutor.java:1073"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ThreadPoolExecutor.java:1134"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.ThreadPoolExecutor"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$Worker")]),a._v(".run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ThreadPoolExecutor.java:624"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.lang.Thread.run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Thread.java:748"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Process I/O pool 59"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#769 daemon prio=4 os_prio=-1 tid=0x000000001df86800 nid=0x4854 waiting on condition [0x000000006d10f000]")]),a._v("\n   java.lang.Thread.State: TIMED_WAITING "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("parking"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat sun.misc.Unsafe.park"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Native Method"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\t- parking to "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wait")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("0x000000074b0c722"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("0")]),a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a java.util.concurrent.SynchronousQueue"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TransferStack")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.locks.LockSupport.parkNanos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("LockSupport.java:215"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.SynchronousQueue"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TransferStack")]),a._v(".awaitFulfill"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SynchronousQueue.java:460"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.SynchronousQueue"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TransferStack")]),a._v(".transfer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SynchronousQueue.java:362"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.SynchronousQueue.poll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SynchronousQueue.java:941"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.ThreadPoolExecutor.getTask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ThreadPoolExecutor.java:1073"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ThreadPoolExecutor.java:1134"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.ThreadPoolExecutor"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$Worker")]),a._v(".run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ThreadPoolExecutor.java:624"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.lang.Thread.run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Thread.java:748"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Process I/O pool 58"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#768 daemon prio=4 os_prio=-1 tid=0x000000001df87800 nid=0x2cf8 waiting on condition [0x000000006d00f000]")]),a._v("\n   java.lang.Thread.State: TIMED_WAITING "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("parking"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat sun.misc.Unsafe.park"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Native Method"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\t- parking to "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wait")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("0x000000074b0c722"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("0")]),a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a java.util.concurrent.SynchronousQueue"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TransferStack")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.locks.LockSupport.parkNanos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("LockSupport.java:215"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.SynchronousQueue"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TransferStack")]),a._v(".awaitFulfill"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SynchronousQueue.java:460"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.SynchronousQueue"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TransferStack")]),a._v(".transfer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SynchronousQueue.java:362"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.SynchronousQueue.poll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SynchronousQueue.java:941"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.ThreadPoolExecutor.getTask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ThreadPoolExecutor.java:1073"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ThreadPoolExecutor.java:1134"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.util.concurrent.ThreadPoolExecutor"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$Worker")]),a._v(".run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ThreadPoolExecutor.java:624"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat java.lang.Thread.run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Thread.java:748"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br"),s("span",{staticClass:"line-number"},[a._v("40")]),s("br"),s("span",{staticClass:"line-number"},[a._v("41")]),s("br"),s("span",{staticClass:"line-number"},[a._v("42")]),s("br"),s("span",{staticClass:"line-number"},[a._v("43")]),s("br"),s("span",{staticClass:"line-number"},[a._v("44")]),s("br"),s("span",{staticClass:"line-number"},[a._v("45")]),s("br"),s("span",{staticClass:"line-number"},[a._v("46")]),s("br"),s("span",{staticClass:"line-number"},[a._v("47")]),s("br"),s("span",{staticClass:"line-number"},[a._v("48")]),s("br"),s("span",{staticClass:"line-number"},[a._v("49")]),s("br")])]),s("ul",[s("li",[a._v("ä½¿ç”¨Java VisualVM åœ¨jdkçš„ libç›®å½•ä¸‹ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨cmd å‘½ä»¤ä¸‹çš„ï¼š")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("jvisualvm\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"visualvm-å®‰è£…gcæ’ä»¶"}},[a._v("VisualVM å®‰è£…GCæ’ä»¶")]),a._v(" "),s("p",[a._v("1.å…ˆå»æ’ä»¶ä¸­å¿ƒä¸‹è½½è‡ªå·±JDKå¯¹åº”çš„æ’ä»¶ç‰ˆæœ¬ "),s("a",{attrs:{href:"https://visualvm.github.io/pluginscenters.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("å®˜ç½‘"),s("OutboundLink")],1),a._v(" "),s("img",{attrs:{src:"/img/interviewtopic/jvm.jpg",alt:"jvm"}}),a._v("\n2.ç‚¹å‡»è¿›å…¥ä¸‹è½½è‡ªå·±æ‰€éœ€è¦çš„æ’ä»¶ï¼Œä¾‹å¦‚ï¼šgcæ’ä»¶ com-sun-tools-visualvm-modules-visualgc_1.nbm\n3.æ‰“å¼€Java JvisualVM-å·¥å…·-æ’ä»¶-å·²ä¸‹è½½-æ·»åŠ æ’ä»¶ï¼Œé€‰æ‹©å·²ä¸‹è½½çš„æ’ä»¶å®‰è£…å³å¯")]),a._v(" "),s("h3",{attrs:{id:"å‘½ä»¤æ€»ç»“"}},[a._v("å‘½ä»¤æ€»ç»“")]),a._v(" "),s("ul",[s("li",[a._v("jinfo:å¯ä»¥è¾“å‡ºå¹¶ä¿®æ”¹è¿è¡Œæ—¶çš„java è¿›ç¨‹çš„optsã€‚")]),a._v(" "),s("li",[a._v("jps:ä¸unixä¸Šçš„psç±»ä¼¼ï¼Œç”¨æ¥æ˜¾ç¤ºæœ¬åœ°çš„javaè¿›ç¨‹ï¼Œå¯ä»¥æŸ¥çœ‹æœ¬åœ°è¿è¡Œç€å‡ ä¸ªjavaç¨‹åºï¼Œå¹¶æ˜¾ç¤ºä»–ä»¬çš„è¿›ç¨‹å·ã€‚")]),a._v(" "),s("li",[a._v("jstat:ä¸€ä¸ªæå¼ºçš„ç›‘è§†VMå†…å­˜å·¥å…·ã€‚å¯ä»¥ç”¨æ¥ç›‘è§†VMå†…å­˜å†…çš„å„ç§å †å’Œéå †çš„å¤§å°åŠå…¶å†…å­˜ä½¿ç”¨é‡ã€‚")]),a._v(" "),s("li",[a._v("jmap:æ‰“å°å‡ºæŸä¸ªjavaè¿›ç¨‹ï¼ˆä½¿ç”¨pidï¼‰å†…å­˜å†…çš„æ‰€æœ‰'å¯¹è±¡'çš„æƒ…å†µï¼ˆå¦‚ï¼šäº§ç”Ÿé‚£äº›å¯¹è±¡ï¼ŒåŠå…¶æ•°é‡ï¼‰ã€‚")]),a._v(" "),s("li",[a._v("jconsole:ä¸€ä¸ªjava GUIç›‘è§†å·¥å…·ï¼Œå¯ä»¥ä»¥å›¾è¡¨åŒ–çš„å½¢å¼æ˜¾ç¤ºå„ç§æ•°æ®ã€‚å¹¶å¯é€šè¿‡è¿œç¨‹è¿æ¥ç›‘è§†è¿œç¨‹çš„æœåŠ¡å™¨VMã€‚")])]),a._v(" "),s("p",[a._v("è¯¦ç»†ï¼šåœ¨ä½¿ç”¨è¿™äº›å·¥å…·å‰ï¼Œå…ˆç”¨JPSå‘½ä»¤è·å–å½“å‰çš„æ¯ä¸ªJVMè¿›ç¨‹å·ï¼Œç„¶åé€‰æ‹©è¦æŸ¥çœ‹çš„JVMã€‚")]),a._v(" "),s("hr"),a._v(" "),s("ul",[s("li",[a._v("jstatå·¥å…·ç‰¹åˆ«å¼ºå¤§ï¼Œæœ‰ä¼—å¤šçš„å¯é€‰é¡¹ï¼Œè¯¦ç»†æŸ¥çœ‹å †å†…å„ä¸ªéƒ¨åˆ†çš„ä½¿ç”¨é‡ï¼Œä»¥åŠåŠ è½½ç±»çš„æ•°é‡ã€‚ä½¿ç”¨æ—¶ï¼Œéœ€åŠ ä¸ŠæŸ¥çœ‹è¿›ç¨‹çš„è¿›ç¨‹idï¼Œå’Œæ‰€é€‰å‚æ•°ã€‚ä»¥ä¸‹è¯¦ç»†ä»‹ç»å„ä¸ªå‚æ•°çš„æ„ä¹‰ã€‚")]),a._v(" "),s("li",[a._v("jstat -class pid:æ˜¾ç¤ºåŠ è½½classçš„æ•°é‡ï¼ŒåŠæ‰€å ç©ºé—´ç­‰ä¿¡æ¯ã€‚")]),a._v(" "),s("li",[a._v("jstat -compiler pid:æ˜¾ç¤ºVMå®æ—¶ç¼–è¯‘çš„æ•°é‡ç­‰ä¿¡æ¯ã€‚")]),a._v(" "),s("li",[a._v("jstat -gc pid:å¯ä»¥æ˜¾ç¤ºgcçš„ä¿¡æ¯ï¼ŒæŸ¥çœ‹gcçš„æ¬¡æ•°ï¼ŒåŠæ—¶é—´ã€‚å…¶ä¸­æœ€åäº”é¡¹ï¼Œåˆ†åˆ«æ˜¯young gcçš„æ¬¡æ•°ï¼Œyoung gcçš„æ—¶é—´ï¼Œfull gcçš„æ¬¡æ•°ï¼Œfull gcçš„æ—¶é—´ï¼Œgcçš„æ€»æ—¶é—´ã€‚")]),a._v(" "),s("li",[a._v("jstat -gccapacity:å¯ä»¥æ˜¾ç¤ºï¼ŒVMå†…å­˜ä¸­ä¸‰ä»£ï¼ˆyoung,old,permï¼‰å¯¹è±¡çš„ä½¿ç”¨å’Œå ç”¨å¤§å°ï¼Œå¦‚ï¼šPGCMNæ˜¾ç¤ºçš„æ˜¯æœ€å°permçš„å†…å­˜ä½¿ç”¨é‡ï¼ŒPGCMXæ˜¾ç¤ºçš„æ˜¯permçš„å†…å­˜æœ€å¤§ä½¿ç”¨é‡ï¼ŒPGCæ˜¯å½“å‰æ–°ç”Ÿæˆçš„permå†…å­˜å ç”¨é‡ï¼ŒPCæ˜¯ä½†å‰permå†…å­˜å ç”¨é‡ã€‚å…¶ä»–çš„å¯ä»¥æ ¹æ®è¿™ä¸ªç±»æ¨ï¼Œ OCæ˜¯oldå†…çº¯çš„å ç”¨é‡ã€‚")]),a._v(" "),s("li",[a._v("jstat -gcnew pid:newå¯¹è±¡çš„ä¿¡æ¯ã€‚")]),a._v(" "),s("li",[a._v("jstat -gcnewcapacity pid:newå¯¹è±¡çš„ä¿¡æ¯åŠå…¶å ç”¨é‡ã€‚")]),a._v(" "),s("li",[a._v("jstat -gcold pid:oldå¯¹è±¡çš„ä¿¡æ¯ã€‚")]),a._v(" "),s("li",[a._v("jstat -gcoldcapacity pid:oldå¯¹è±¡çš„ä¿¡æ¯åŠå…¶å ç”¨é‡ã€‚")]),a._v(" "),s("li",[a._v("jstat -gcpermcapacity pid: permå¯¹è±¡çš„ä¿¡æ¯åŠå…¶å ç”¨é‡ã€‚")]),a._v(" "),s("li",[a._v("jstat -util pid:ç»Ÿè®¡gcä¿¡æ¯ç»Ÿè®¡ã€‚")]),a._v(" "),s("li",[a._v("jstat -printcompilation pid:å½“å‰VMæ‰§è¡Œçš„ä¿¡æ¯ã€‚\né™¤äº†ä»¥ä¸Šä¸€ä¸ªå‚æ•°å¤–ï¼Œè¿˜å¯ä»¥åŒæ—¶åŠ ä¸Š ä¸¤ä¸ªæ•°å­—ï¼Œå¦‚ï¼šjstat -printcompilation 3024 250 6æ˜¯æ¯250æ¯«ç§’æ‰“å°ä¸€æ¬¡ï¼Œä¸€å…±æ‰“å°6æ¬¡ï¼Œè¿˜å¯ä»¥åŠ ä¸Š-h3æ¯ä¸‰è¡Œæ˜¾ç¤ºä¸€ä¸‹æ ‡é¢˜ã€‚")])]),a._v(" "),s("p",[a._v("jmapæ˜¯ä¸€ä¸ªå¯ä»¥è¾“å‡ºæ‰€æœ‰å†…å­˜ä¸­å¯¹è±¡çš„å·¥å…·ï¼Œç”šè‡³å¯ä»¥å°†VM ä¸­çš„heapï¼Œä»¥äºŒè¿›åˆ¶è¾“å‡ºæˆæ–‡æœ¬ã€‚\nå‘½ä»¤ï¼šjmap -dump:format=b,file=heap.bin pid\nfileï¼šä¿å­˜è·¯å¾„åŠæ–‡ä»¶å\npidï¼šè¿›ç¨‹ç¼–å·\njmap -histo:live  pid| less :å †ä¸­æ´»åŠ¨çš„å¯¹è±¡ä»¥åŠå¤§å°\njmap -heap pid : æŸ¥çœ‹å †çš„ä½¿ç”¨çŠ¶å†µä¿¡æ¯")]),a._v(" "),s("h2",{attrs:{id:"jvmå†…å­˜æ¨¡å‹"}},[a._v("JVMå†…å­˜æ¨¡å‹")]),a._v(" "),s("ul",[s("li",[a._v("å…ˆçœ‹ä¸€ä¸‹jvmå†…å­˜æ¨¡å‹ï¼Œåˆ†ä¸º å †ã€æ–¹æ³•åŒºã€æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨")])]),a._v(" "),s("h4",{attrs:{id:"æ€»ä½“å†…å­˜æ¨¡å‹"}},[a._v("æ€»ä½“å†…å­˜æ¨¡å‹")]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/interviewtopic/jvm10.png",alt:"jvm"}})]),a._v(" "),s("p",[a._v("æ©™è‰²çš„éƒ¨åˆ†æ˜¯å…±äº«çš„ï¼Œ è“è‰²çš„éƒ¨åˆ†æ˜¯ç§æœ‰çš„")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("æ–¹æ³•åŒº")]),a._v(" å®ƒç”¨äºå­˜å‚¨è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€æ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸã€‚")]),a._v(" "),s("li",[s("strong",[a._v("è™šæ‹Ÿæœºæ ˆ(JVM Stack)")]),a._v(' æè¿°çš„æ˜¯javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ª"æ ˆå¸§",ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨(åŒ…æ‹¬å‚æ•°)ã€æ“ä½œæ ˆã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸ªæ–¹æ³•è¢«è°ƒç”¨åˆ°æ‰§è¡Œå®Œçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚')]),a._v(" "),s("li",[s("strong",[a._v("æœ¬åœ°æ–¹æ³•æ ˆ(Native Stack)")]),a._v(" æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰ä¸è™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œå…¶åŒºåˆ«ä¸è¿‡æ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„Nativeæ–¹æ³•æœåŠ¡ã€‚")]),a._v(" "),s("li",[s("strong",[a._v("ç¨‹åºè®¡æ•°å™¨ï¼ˆPC Registerï¼‰")]),a._v("  ç¨‹åºè®¡æ•°å™¨æ˜¯ç”¨äºæ ‡è¯†å½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç æ–‡ä»¶çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å…·æœ‰å„è‡ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œæ‰€ä»¥è¯¥åŒºåŸŸæ˜¯éçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸã€‚ å½“æ‰§è¡Œjavaæ–¹æ³•æ—¶å€™ï¼Œè®¡æ•°å™¨ä¸­ä¿å­˜çš„æ˜¯å­—èŠ‚ç æ–‡ä»¶çš„è¡Œå·ï¼›å½“æ‰§è¡ŒNativeæ–¹æ³•æ—¶ï¼Œè®¡æ•°å™¨çš„å€¼ä¸ºç©ºã€‚")])]),a._v(" "),s("h4",{attrs:{id:"jvmå†…å­˜å‚æ•°è®¾ç½®"}},[a._v("JVMå†…å­˜å‚æ•°è®¾ç½®")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("-Xmsè®¾ç½®å †çš„æœ€å°ç©ºé—´å¤§å°ã€‚")])]),a._v(" "),s("li",[s("p",[a._v("-Xmxè®¾ç½®å †çš„æœ€å¤§ç©ºé—´å¤§å°ã€‚")])]),a._v(" "),s("li",[s("p",[a._v("-Xmn:è®¾ç½®å¹´è½»ä»£å¤§å°")])]),a._v(" "),s("li",[s("p",[a._v("-XX:NewSizeè®¾ç½®æ–°ç”Ÿä»£æœ€å°ç©ºé—´å¤§å°ã€‚")])]),a._v(" "),s("li",[s("p",[a._v("-XX:MaxNewSizeè®¾ç½®æ–°ç”Ÿä»£æœ€å¤§ç©ºé—´å¤§å°ã€‚")])]),a._v(" "),s("li",[s("p",[a._v("-XX:PermSizeè®¾ç½®æ°¸ä¹…ä»£æœ€å°ç©ºé—´å¤§å°ã€‚")])]),a._v(" "),s("li",[s("p",[a._v("-XX:MaxPermSizeè®¾ç½®æ°¸ä¹…ä»£æœ€å¤§ç©ºé—´å¤§å°ã€‚")])]),a._v(" "),s("li",[s("p",[a._v("-Xssè®¾ç½®æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°")])]),a._v(" "),s("li",[s("p",[a._v("-XX:+UseParallelGC:é€‰æ‹©åƒåœ¾æ”¶é›†å™¨ä¸ºå¹¶è¡Œæ”¶é›†å™¨ã€‚æ­¤é…ç½®ä»…å¯¹å¹´è½»ä»£æœ‰æ•ˆã€‚å³ä¸Šè¿°é…ç½®ä¸‹,å¹´è½»ä»£ä½¿ç”¨å¹¶å‘æ”¶é›†,è€Œå¹´è€ä»£ä»æ—§ä½¿ç”¨ä¸²è¡Œæ”¶é›†ã€‚")])]),a._v(" "),s("li",[s("p",[a._v("-XX:ParallelGCThreads=20:é…ç½®å¹¶è¡Œæ”¶é›†å™¨çš„çº¿ç¨‹æ•°,å³:åŒæ—¶å¤šå°‘ä¸ªçº¿ç¨‹ä¸€èµ·è¿›è¡Œåƒåœ¾å›æ”¶ã€‚æ­¤å€¼æœ€å¥½é…ç½®ä¸å¤„ç†å™¨æ•°ç›®ç›¸ç­‰ã€‚\nå…¸å‹JVMå‚æ•°é…ç½®å‚è€ƒ:")])]),a._v(" "),s("li",[s("p",[a._v("-Xmx3550m-Xms3550m-Xmn2g-Xss128k")])]),a._v(" "),s("li",[s("p",[a._v("-XX:ParallelGCThreads=20")])]),a._v(" "),s("li",[s("p",[a._v("-XX:+UseConcMarkSweepGC-XX:+UseParNewGC")])]),a._v(" "),s("li",[s("p",[a._v("-Xmx3550m:è®¾ç½®JVMæœ€å¤§å¯ç”¨å†…å­˜ä¸º3550Mã€‚")])]),a._v(" "),s("li",[s("p",[a._v("-Xms3550m:è®¾ç½®JVMä¿ƒä½¿å†…å­˜ä¸º3550mã€‚æ­¤å€¼å¯ä»¥è®¾ç½®ä¸-Xmxç›¸åŒ,ä»¥é¿å…æ¯æ¬¡åƒåœ¾å›æ”¶å®ŒæˆåJVMé‡æ–°åˆ†é…å†…å­˜ã€‚")])]),a._v(" "),s("li",[s("p",[a._v("-Xmn2g:è®¾ç½®å¹´è½»ä»£å¤§å°ä¸º2Gã€‚æ•´ä¸ªå †å¤§å°=å¹´è½»ä»£å¤§å°+å¹´è€ä»£å¤§å°+æŒä¹…ä»£å¤§å°ã€‚æŒä¹…ä»£ä¸€èˆ¬å›ºå®šå¤§å°ä¸º64m,æ‰€ä»¥å¢å¤§å¹´è½»ä»£å,å°†ä¼šå‡å°å¹´è€ä»£å¤§å°ã€‚æ­¤å€¼å¯¹ç³»ç»Ÿæ€§èƒ½å½±å“è¾ƒå¤§,å®˜æ–¹æ¨èé…ç½®ä¸ºæ•´ä¸ªå †çš„3/8ã€‚")])]),a._v(" "),s("li",[s("p",[a._v("-Xss128k:è®¾ç½®æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°ã€‚JDK5.0ä»¥åæ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º1M,ä»¥å‰æ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º256Kã€‚æ›´å…·åº”ç”¨çš„çº¿ç¨‹æ‰€éœ€å†…å­˜å¤§ å°è¿›è¡Œè°ƒæ•´ã€‚åœ¨ç›¸åŒç‰©ç†å†…å­˜ä¸‹,å‡å°è¿™ä¸ªå€¼èƒ½ç”Ÿæˆæ›´å¤šçš„çº¿ç¨‹ã€‚ä½†æ˜¯æ“ä½œç³»ç»Ÿå¯¹ä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹æ•°è¿˜æ˜¯æœ‰é™åˆ¶çš„,ä¸èƒ½æ— é™ç”Ÿæˆ,ç»éªŒå€¼åœ¨3000~5000 å·¦å³ã€‚")])])]),a._v(" "),s("h2",{attrs:{id:"å †å†…å­˜æ¨¡å‹"}},[a._v("å †å†…å­˜æ¨¡å‹")]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/interviewtopic/jvm8.png",alt:"jvm"}})]),a._v(" "),s("ul",[s("li",[a._v("åˆ†ä¸ºEden åŒº from  ã€to ã€ old Memoryï¼ˆè€å¹´ä»£ï¼‰")]),a._v(" "),s("li",[a._v("Eden : from : to = 8 : 1 : 1 ( å¯ä»¥é€šè¿‡å‚æ•° â€“XX:SurvivorRatio æ¥è®¾å®š )ï¼Œå³ï¼š Eden = 8/10 çš„æ–°ç”Ÿä»£ç©ºé—´å¤§å°ï¼Œfrom = to = 1/10 çš„æ–°ç”Ÿä»£ç©ºé—´å¤§å°ã€‚")])]),a._v(" "),s("div",{staticClass:"danger custom-block"},[s("p",[a._v("Eden åŒºä¼šé€šè¿‡MinorGC(YoungGC) å›æ”¶ Eden åŒºäº§ç”Ÿçš„åƒåœ¾ï¼Œå¦‚æœ æ²¡æœ‰å›æ”¶çš„åƒåœ¾å°†ä¼š è½¬ç§»åˆ° fromåŒºï¼Œ fromåŒº ä¹Ÿä¼šæ‰§è¡ŒMinorGC, å¦‚æœæ²¡æœ‰\næˆåŠŸå›æ”¶çš„åƒåœ¾å°†ä¼šè½¬è¯‘åˆ°to åŒºï¼Œ å¦‚æœtoåŒºæ‰§è¡ŒMinorGC, ä¹Ÿæ²¡æœ‰æˆåŠŸå›æ”¶é‚£ä¹ˆåƒåœ¾ä¼šé‡æ–°è¿”å›åˆ°fromåŒºï¼Œå¦‚æœè¿™ä¸ªåƒåœ¾åœ¨from åŒºåˆ°toåŒºå¾ªç¯15æ¬¡ä¹‹åè¿˜æ˜¯æ²¡æœ‰è¢«å›æ”¶\né‚£ä¹ˆ è¯¥åƒåœ¾å°†è¢«è½¬è¯‘åˆ° è€å¹´ä»£ï¼ˆoldï¼‰ï¼Œåœ¨è€å¹´ä»£ä¸­æ”¶é›†ç€éš¾ä»¥å›æ”¶çš„åƒåœ¾ï¼Œå’Œå¤§å¯¹è±¡ç­‰ç­‰ã€‚ è€å¹´ä»£æ‰§è¡Œçš„åƒåœ¾å›æ”¶å«åš MajorGC(Old GC)")])]),a._v(" "),s("h2",{attrs:{id:"æ ˆå†…å­˜æ¨¡å‹"}},[a._v("æ ˆå†…å­˜æ¨¡å‹")]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/interviewtopic/jvm9.png",alt:"jvm"}})]),a._v(" "),s("h2",{attrs:{id:"åƒåœ¾å›æ”¶ç®—æ³•"}},[a._v("åƒåœ¾å›æ”¶ç®—æ³•")]),a._v(" "),s("h3",{attrs:{id:"æ ‡è®°æ¸…é™¤ç®—æ³•"}},[a._v("æ ‡è®°æ¸…é™¤ç®—æ³•")]),a._v(" "),s("p",[s("strong",[a._v("å®šä¹‰")]),a._v("ï¼šæ ‡è®°æ¸…é™¤ç®—æ³•é¡¾åæ€ä¹‰ï¼Œæ˜¯æŒ‡åœ¨è™šæ‹Ÿæœºæ‰§è¡Œåƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¸­ï¼Œå…ˆé‡‡ç”¨æ ‡è®°ç®—æ³•ç¡®å®šå¯å›æ”¶å¯¹è±¡ï¼Œç„¶ååƒåœ¾æ”¶é›†å™¨æ ¹æ®æ ‡è¯†æ¸…é™¤ç›¸åº”çš„å†…å®¹ï¼Œç»™å †å†…å­˜è…¾å‡ºç›¸åº”çš„ç©ºé—´ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("ç¼ºç‚¹")]),a._v("ï¼šå®¹æ˜“äº§ç”Ÿå¤§é‡çš„å†…å­˜ç¢ç‰‡ï¼Œå¯èƒ½æ— æ³•æ»¡è¶³å¤§å¯¹è±¡çš„å†…å­˜åˆ†é…ï¼Œä¸€æ—¦å¯¼è‡´æ— æ³•åˆ†é…å¯¹è±¡ï¼Œé‚£å°±ä¼šå¯¼è‡´jvmå¯åŠ¨gcï¼Œä¸€æ—¦å¯åŠ¨gcï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå°±ä¼šæš‚åœï¼Œè¿™å°±å¯¼è‡´åº”ç”¨çš„å“åº”é€Ÿåº¦å˜æ…¢ã€‚\n"),s("img",{attrs:{src:"/img/interviewtopic/jvm11.png",alt:"jvm"}})]),a._v(" "),s("h3",{attrs:{id:"å¤åˆ¶ç®—æ³•"}},[a._v("å¤åˆ¶ç®—æ³•")]),a._v(" "),s("p",[s("strong",[a._v("å®šä¹‰")]),a._v("ï¼šæŠŠå†…å­˜ç©ºé—´åˆ†æˆä¸¤ä¸ªç»´åº¦ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€ä¸ªç©ºé—´ã€‚å½“å¼€å§‹gcçš„æ—¶ï¼Œåƒåœ¾å›æ”¶å™¨ä¼šæŠŠç›¸åº”çš„åƒåœ¾æ¸…é™¤ï¼Œå‰©ä¸‹çš„å­˜æ´»å¯¹è±¡æŒ‰ç…§é¡ºåºæ’åˆ—å®Œæˆæ¸…ç†ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("ç¼ºç‚¹")]),a._v("ï¼šå¤åˆ¶ç®—æ³•æŠŠæœ‰ç”¨çš„ç©ºé—´å‹ç¼©äº†ä¸€åŠï¼Œå› ä¸ºæ¯æ¬¡åªèƒ½ä½¿ç”¨ä¸€åŠçš„ç©ºé—´ç”¨ä½œåˆ†é…ï¼Œå‰©ä¸‹çš„ç”¨ä½œgcåçš„åˆ†é…ã€‚\n"),s("img",{attrs:{src:"/img/interviewtopic/jvm12.png",alt:"jvm"}})]),a._v(" "),s("h3",{attrs:{id:"æ ‡è®°-æ•´ç†ç®—æ³•"}},[a._v("æ ‡è®°-æ•´ç†ç®—æ³•")]),a._v(" "),s("p",[s("strong",[a._v("å®šä¹‰")]),a._v("ï¼šæ ‡è®°æ•´ç†ç®—æ³•æ˜¯æ ‡è®°æ¸…é™¤çš„æ”¹è¿›ç‰ˆæœ¬ï¼Œå½“åƒåœ¾æ”¶é›†å™¨æŠŠåƒåœ¾æ¸…é™¤åï¼Œä¸‹ä¸€æ­¥è¿˜ä¼šå¯¹å†…å­˜ç¢ç‰‡è¿›è¡Œæ•´ç†ï¼ŒæŠŠå­˜æ´»å¯¹è±¡ç»Ÿä¸€çš„æ•´ç†åˆ°ä¸€è¾¹ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("ç¼ºç‚¹")]),a._v("ï¼šè™½ç„¶ç®—æ³•å…å»äº†å†…å­˜ç¢ç‰‡çš„å‡ºç°å’ŒèŠ‚çœäº†ç©ºé—´ï¼Œä½†è¿™ç§ç®—æ³•éœ€è¦é¢‘ç¹çš„ç§»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥ä¼šé€ æˆgcæ•ˆç‡çš„é™ä½ã€‚\n"),s("img",{attrs:{src:"/img/interviewtopic/jvm13.png",alt:"jvm"}})]),a._v(" "),s("h3",{attrs:{id:"åˆ†ä»£æ•´ç†ç®—æ³•"}},[a._v("åˆ†ä»£æ•´ç†ç®—æ³•")]),a._v(" "),s("p",[a._v("æ ¹æ®å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸åŒ")]),a._v(" "),s("h3",{attrs:{id:"ä½¿ç”¨åœºæ™¯"}},[a._v("ä½¿ç”¨åœºæ™¯")]),a._v(" "),s("ul",[s("li",[a._v("æ–°ç”Ÿä»£ä½¿ç”¨å¤åˆ¶ç®—æ³•")]),a._v(" "),s("li",[a._v("è€å¹´ä»£ä½¿ç”¨æ ‡è®°æ¸…é™¤ç®—æ³•æˆ–è€…æ ‡è®°æ•´ç†ç®—æ³•")])]),a._v(" "),s("h2",{attrs:{id:"åƒåœ¾å›æ”¶å™¨"}},[a._v("åƒåœ¾å›æ”¶å™¨")]),a._v(" "),s("p",[a._v("å›¾è§£HotSpotè™šæ‹Ÿæœºæ‰€åŒ…å«çš„æ”¶é›†å™¨ï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/interviewtopic/jvm1.png",alt:"jvm"}})]),a._v(" "),s("p",[s("strong",[a._v("æ–°ç”Ÿä»£æ”¶é›†å™¨")]),a._v("ï¼šSerialã€ParNewã€Parallel Scavenge")]),a._v(" "),s("p",[s("strong",[a._v("è€å¹´ä»£æ”¶é›†å™¨")]),a._v("ï¼šCMSã€Serial Oldã€Parallel Old")]),a._v(" "),s("p",[s("strong",[a._v("æ•´å †æ”¶é›†å™¨")]),a._v("ï¼š G1")]),a._v(" "),s("p",[a._v("å‡ ä¸ªç›¸å…³æ¦‚å¿µï¼š\n"),s("strong",[a._v("å¹¶è¡Œæ”¶é›†")]),a._v("ï¼šæŒ‡å¤šæ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œä½†æ­¤æ—¶ç”¨æˆ·çº¿ç¨‹ä»å¤„äºç­‰å¾…çŠ¶æ€ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("å¹¶å‘æ”¶é›†")]),a._v("ï¼šæŒ‡ç”¨æˆ·çº¿ç¨‹ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹åŒæ—¶å·¥ä½œï¼ˆä¸ä¸€å®šæ˜¯å¹¶è¡Œçš„å¯èƒ½ä¼šäº¤æ›¿æ‰§è¡Œï¼‰ã€‚ç”¨æˆ·ç¨‹åºåœ¨ç»§ç»­è¿è¡Œï¼Œè€Œåƒåœ¾æ”¶é›†ç¨‹åºè¿è¡Œåœ¨å¦ä¸€ä¸ªCPUä¸Šã€‚")]),a._v(" "),s("p",[s("strong",[a._v("ååé‡")]),a._v("ï¼šå³CPUç”¨äºè¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´ä¸CPUæ€»æ¶ˆè€—æ—¶é—´çš„æ¯”å€¼ï¼ˆååé‡ = è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ / ( è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ + åƒåœ¾æ”¶é›†æ—¶é—´ )ï¼‰ã€‚ä¾‹å¦‚ï¼šè™šæ‹Ÿæœºå…±è¿è¡Œ100åˆ†é’Ÿï¼Œåƒåœ¾æ”¶é›†å™¨èŠ±æ‰1åˆ†é’Ÿï¼Œé‚£ä¹ˆååé‡å°±æ˜¯99%")]),a._v(" "),s("h3",{attrs:{id:"serial-æ”¶é›†å™¨"}},[a._v("Serial æ”¶é›†å™¨")]),a._v(" "),s("p",[a._v("Serialæ”¶é›†å™¨æ˜¯æœ€åŸºæœ¬çš„ã€å‘å±•å†å²æœ€æ‚ ä¹…çš„æ”¶é›†å™¨ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("ç‰¹ç‚¹")]),a._v("ï¼šå•çº¿ç¨‹ã€ç®€å•é«˜æ•ˆï¼ˆä¸å…¶ä»–æ”¶é›†å™¨çš„å•çº¿ç¨‹ç›¸æ¯”ï¼‰ï¼Œå¯¹äºé™å®šå•ä¸ªCPUçš„ç¯å¢ƒæ¥è¯´ï¼ŒSerialæ”¶é›†å™¨ç”±äºæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œä¸“å¿ƒåšåƒåœ¾æ”¶é›†è‡ªç„¶å¯ä»¥è·å¾—æœ€é«˜çš„å•çº¿ç¨‹æ‰‹æœºæ•ˆç‡ã€‚æ”¶é›†å™¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œå¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ï¼Œç›´åˆ°å®ƒç»“æŸï¼ˆStop The Worldï¼‰ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("åº”ç”¨åœºæ™¯")]),a._v("ï¼šé€‚ç”¨äºClientæ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºã€‚")]),a._v(" "),s("p",[a._v("Serial / Serial Oldæ”¶é›†å™¨è¿è¡Œç¤ºæ„å›¾")]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/interviewtopic/jvm2.png",alt:"jvm"}})]),a._v(" "),s("h3",{attrs:{id:"parnewæ”¶é›†å™¨"}},[a._v("ParNewæ”¶é›†å™¨")]),a._v(" "),s("p",[a._v("ParNewæ”¶é›†å™¨å…¶å®å°±æ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ã€‚")]),a._v(" "),s("p",[a._v("é™¤äº†ä½¿ç”¨å¤šçº¿ç¨‹å¤–å…¶ä½™è¡Œä¸ºå‡å’ŒSerialæ”¶é›†å™¨ä¸€æ¨¡ä¸€æ ·ï¼ˆå‚æ•°æ§åˆ¶ã€æ”¶é›†ç®—æ³•ã€Stop The Worldã€å¯¹è±¡åˆ†é…è§„åˆ™ã€å›æ”¶ç­–ç•¥ç­‰ï¼‰ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("ç‰¹ç‚¹")]),a._v("ï¼šå¤šçº¿ç¨‹ã€ParNewæ”¶é›†å™¨é»˜è®¤å¼€å¯çš„æ”¶é›†çº¿ç¨‹æ•°ä¸CPUçš„æ•°é‡ç›¸åŒï¼Œåœ¨CPUéå¸¸å¤šçš„ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨-XX:ParallelGCThreadså‚æ•°æ¥é™åˆ¶åƒåœ¾æ”¶é›†çš„çº¿ç¨‹æ•°ã€‚")]),a._v(" "),s("p",[a._v("å’ŒSerialæ”¶é›†å™¨ä¸€æ ·å­˜åœ¨Stop The Worldé—®é¢˜")]),a._v(" "),s("p",[s("strong",[a._v("åº”ç”¨åœºæ™¯")]),a._v("ï¼šParNewæ”¶é›†å™¨æ˜¯è®¸å¤šè¿è¡Œåœ¨Serveræ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºä¸­é¦–é€‰çš„æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œå› ä¸ºå®ƒæ˜¯é™¤äº†Serialæ”¶é›†å™¨å¤–ï¼Œå”¯ä¸€ä¸€ä¸ªèƒ½ä¸CMSæ”¶é›†å™¨é…åˆå·¥ä½œçš„ã€‚")]),a._v(" "),s("p",[a._v("ParNew/Serial Oldç»„åˆæ”¶é›†å™¨è¿è¡Œç¤ºæ„å›¾å¦‚ä¸‹ï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/interviewtopic/jvm3.png",alt:"jvm"}})]),a._v(" "),s("h3",{attrs:{id:"parallel-scavenge-æ”¶é›†å™¨"}},[a._v("Parallel Scavenge æ”¶é›†å™¨")]),a._v(" "),s("p",[a._v("ä¸ååé‡å…³ç³»å¯†åˆ‡ï¼Œæ•…ä¹Ÿç§°ä¸ºååé‡ä¼˜å…ˆæ”¶é›†å™¨ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("ç‰¹ç‚¹")]),a._v("ï¼šå±äºæ–°ç”Ÿä»£æ”¶é›†å™¨ä¹Ÿæ˜¯é‡‡ç”¨å¤åˆ¶ç®—æ³•çš„æ”¶é›†å™¨ï¼Œåˆæ˜¯å¹¶è¡Œçš„å¤šçº¿ç¨‹æ”¶é›†å™¨ï¼ˆä¸ParNewæ”¶é›†å™¨ç±»ä¼¼ï¼‰ã€‚")]),a._v(" "),s("p",[a._v("è¯¥æ”¶é›†å™¨çš„ç›®æ ‡æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æ§åˆ¶çš„ååé‡ã€‚è¿˜æœ‰ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„ç‚¹æ˜¯ï¼šGCè‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ï¼ˆä¸ParNewæ”¶é›†å™¨æœ€é‡è¦çš„ä¸€ä¸ªåŒºåˆ«ï¼‰")]),a._v(" "),s("p",[a._v("GCè‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ï¼šParallel Scavengeæ”¶é›†å™¨å¯è®¾ç½®-XX:+UseAdptiveSizePolicyå‚æ•°ã€‚å½“å¼€å…³æ‰“å¼€æ—¶ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šæ–°ç”Ÿä»£çš„å¤§å°ï¼ˆ-Xmnï¼‰ã€Edenä¸SurvivoråŒºçš„æ¯”ä¾‹ï¼ˆ-XX:SurvivorRationï¼‰ã€æ™‹å‡è€å¹´ä»£çš„å¯¹è±¡å¹´é¾„ï¼ˆ-XX:PretenureSizeThresholdï¼‰ç­‰ï¼Œè™šæ‹Ÿæœºä¼šæ ¹æ®ç³»ç»Ÿçš„è¿è¡ŒçŠ¶å†µæ”¶é›†æ€§èƒ½ç›‘æ§ä¿¡æ¯ï¼ŒåŠ¨æ€è®¾ç½®è¿™äº›å‚æ•°ä»¥æä¾›æœ€ä¼˜çš„åœé¡¿æ—¶é—´å’Œæœ€é«˜çš„ååé‡ï¼Œè¿™ç§è°ƒèŠ‚æ–¹å¼ç§°ä¸ºGCçš„è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ã€‚")]),a._v(" "),s("p",[a._v("Parallel Scavengeæ”¶é›†å™¨ä½¿ç”¨ä¸¤ä¸ªå‚æ•°æ§åˆ¶ååé‡ï¼š")]),a._v(" "),s("p",[a._v("XX:MaxGCPauseMillis æ§åˆ¶æœ€å¤§çš„åƒåœ¾æ”¶é›†åœé¡¿æ—¶é—´")]),a._v(" "),s("p",[a._v("XX:GCRatio ç›´æ¥è®¾ç½®ååé‡çš„å¤§å°ã€‚")]),a._v(" "),s("h3",{attrs:{id:"serial-old-æ”¶é›†å™¨"}},[a._v("Serial Old æ”¶é›†å™¨")]),a._v(" "),s("p",[a._v("Serial Oldæ˜¯Serialæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("ç‰¹ç‚¹ï¼š")]),a._v(" åŒæ ·æ˜¯å•çº¿ç¨‹æ”¶é›†å™¨ï¼Œé‡‡ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("åº”ç”¨åœºæ™¯")]),a._v("ï¼šä¸»è¦ä¹Ÿæ˜¯ä½¿ç”¨åœ¨Clientæ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºä¸­ã€‚ä¹Ÿå¯åœ¨Serveræ¨¡å¼ä¸‹ä½¿ç”¨ã€‚")]),a._v(" "),s("p",[a._v("Serveræ¨¡å¼ä¸‹ä¸»è¦çš„ä¸¤å¤§ç”¨é€”ï¼ˆåœ¨åç»­ä¸­è¯¦ç»†è®²è§£Â·Â·Â·ï¼‰ï¼š")]),a._v(" "),s("p",[a._v("åœ¨JDK1.5ä»¥åŠä»¥å‰çš„ç‰ˆæœ¬ä¸­ä¸Parallel Scavengeæ”¶é›†å™¨æ­é…ä½¿ç”¨ã€‚\nä½œä¸ºCMSæ”¶é›†å™¨çš„åå¤‡æ–¹æ¡ˆï¼Œåœ¨å¹¶å‘æ”¶é›†Concurent Mode Failureæ—¶ä½¿ç”¨ã€‚\nSerial / Serial Oldæ”¶é›†å™¨å·¥ä½œè¿‡ç¨‹å›¾ï¼ˆSerialæ”¶é›†å™¨å›¾ç¤ºç›¸åŒï¼‰ï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/interviewtopic/jvm4.png",alt:"jvm"}})]),a._v(" "),s("h3",{attrs:{id:"parallel-old-æ”¶é›†å™¨"}},[a._v("Parallel Old æ”¶é›†å™¨")]),a._v(" "),s("p",[a._v("æ˜¯Parallel Scavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ã€‚")]),a._v(" "),s("p",[a._v("ç‰¹ç‚¹ï¼šå¤šçº¿ç¨‹ï¼Œé‡‡ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ã€‚")]),a._v(" "),s("p",[a._v("åº”ç”¨åœºæ™¯ï¼šæ³¨é‡é«˜ååé‡ä»¥åŠCPUèµ„æºæ•æ„Ÿçš„åœºåˆï¼Œéƒ½å¯ä»¥ä¼˜å…ˆè€ƒè™‘Parallel Scavenge+Parallel Old æ”¶é›†å™¨ã€‚")]),a._v(" "),s("p",[a._v("Parallel Scavenge/Parallel Oldæ”¶é›†å™¨å·¥ä½œè¿‡ç¨‹å›¾ï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/interviewtopic/jvm5.png",alt:"jvm"}})]),a._v(" "),s("h3",{attrs:{id:"cmsæ”¶é›†å™¨"}},[a._v("CMSæ”¶é›†å™¨")]),a._v(" "),s("p",[s("strong",[a._v("ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ã€‚")])]),a._v(" "),s("p",[s("strong",[a._v("ç‰¹ç‚¹")]),a._v("ï¼šåŸºäºæ ‡è®°-æ¸…é™¤ç®—æ³•å®ç°ã€‚å¹¶å‘æ”¶é›†ã€ä½åœé¡¿ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("åº”ç”¨åœºæ™¯")]),a._v("ï¼šé€‚ç”¨äºæ³¨é‡æœåŠ¡çš„å“åº”é€Ÿåº¦ï¼Œå¸Œæœ›ç³»ç»Ÿåœé¡¿æ—¶é—´æœ€çŸ­ï¼Œç»™ç”¨æˆ·å¸¦æ¥æ›´å¥½çš„ä½“éªŒç­‰åœºæ™¯ä¸‹ã€‚å¦‚webç¨‹åºã€b/sæœåŠ¡ã€‚")]),a._v(" "),s("p",[a._v("CMSæ”¶é›†å™¨çš„è¿è¡Œè¿‡ç¨‹åˆ†ä¸ºä¸‹åˆ—4æ­¥ï¼š")]),a._v(" "),s("p",[s("strong",[a._v("åˆå§‹æ ‡è®°")]),a._v("ï¼šæ ‡è®°GC Rootsèƒ½ç›´æ¥åˆ°çš„å¯¹è±¡ã€‚é€Ÿåº¦å¾ˆå¿«ä½†æ˜¯ä»å­˜åœ¨Stop The Worldé—®é¢˜ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("å¹¶å‘æ ‡è®°")]),a._v("ï¼šè¿›è¡ŒGC Roots Tracing çš„è¿‡ç¨‹ï¼Œæ‰¾å‡ºå­˜æ´»å¯¹è±¡ä¸”ç”¨æˆ·çº¿ç¨‹å¯å¹¶å‘æ‰§è¡Œã€‚")]),a._v(" "),s("p",[s("strong",[a._v("é‡æ–°æ ‡è®°")]),a._v("ï¼šä¸ºäº†ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•ã€‚ä»ç„¶å­˜åœ¨Stop The Worldé—®é¢˜ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("å¹¶å‘æ¸…é™¤")]),a._v("ï¼šå¯¹æ ‡è®°çš„å¯¹è±¡è¿›è¡Œæ¸…é™¤å›æ”¶ã€‚")]),a._v(" "),s("p",[a._v("CMSæ”¶é›†å™¨çš„å†…å­˜å›æ”¶è¿‡ç¨‹æ˜¯ä¸ç”¨æˆ·çº¿ç¨‹ä¸€èµ·å¹¶å‘æ‰§è¡Œçš„ã€‚")]),a._v(" "),s("p",[a._v("CMSæ”¶é›†å™¨çš„å·¥ä½œè¿‡ç¨‹å›¾ï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/interviewtopic/jvm6.png",alt:"jvm"}})]),a._v(" "),s("p",[s("strong",[a._v("CMSæ”¶é›†å™¨çš„ç¼ºç‚¹")]),a._v("ï¼š")]),a._v(" "),s("p",[a._v("å¯¹CPUèµ„æºéå¸¸æ•æ„Ÿã€‚\næ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼Œå¯èƒ½å‡ºç°Concurrent Model Failureå¤±è´¥è€Œå¯¼è‡´å¦ä¸€æ¬¡Full GCçš„äº§ç”Ÿã€‚\nå› ä¸ºé‡‡ç”¨æ ‡è®°-æ¸…é™¤ç®—æ³•æ‰€ä»¥ä¼šå­˜åœ¨ç©ºé—´ç¢ç‰‡çš„é—®é¢˜ï¼Œå¯¼è‡´å¤§å¯¹è±¡æ— æ³•åˆ†é…ç©ºé—´ï¼Œä¸å¾—ä¸æå‰è§¦å‘ä¸€æ¬¡Full GCã€‚")]),a._v(" "),s("h3",{attrs:{id:"g1æ”¶é›†å™¨"}},[a._v("G1æ”¶é›†å™¨")]),a._v(" "),s("p",[a._v("ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("ç‰¹ç‚¹å¦‚ä¸‹ï¼š")])]),a._v(" "),s("p",[s("strong",[a._v("å¹¶è¡Œä¸å¹¶å‘")]),a._v("ï¼šG1èƒ½å……åˆ†åˆ©ç”¨å¤šCPUã€å¤šæ ¸ç¯å¢ƒä¸‹çš„ç¡¬ä»¶ä¼˜åŠ¿ï¼Œä½¿ç”¨å¤šä¸ªCPUæ¥ç¼©çŸ­Stop-The-Worldåœé¡¿æ—¶é—´ã€‚éƒ¨åˆ†æ”¶é›†å™¨åŸæœ¬éœ€è¦åœé¡¿Javaçº¿ç¨‹æ¥æ‰§è¡ŒGCåŠ¨ä½œï¼ŒG1æ”¶é›†å™¨ä»ç„¶å¯ä»¥é€šè¿‡å¹¶å‘çš„æ–¹å¼è®©Javaç¨‹åºç»§ç»­è¿è¡Œã€‚")]),a._v(" "),s("p",[s("strong",[a._v("åˆ†ä»£æ”¶é›†")]),a._v("ï¼šG1èƒ½å¤Ÿç‹¬è‡ªç®¡ç†æ•´ä¸ªJavaå †ï¼Œå¹¶ä¸”é‡‡ç”¨ä¸åŒçš„æ–¹å¼å»å¤„ç†æ–°åˆ›å»ºçš„å¯¹è±¡å’Œå·²ç»å­˜æ´»äº†ä¸€æ®µæ—¶é—´ã€ç†¬è¿‡å¤šæ¬¡GCçš„æ—§å¯¹è±¡ä»¥è·å–æ›´å¥½çš„æ”¶é›†æ•ˆæœã€‚")]),a._v(" "),s("p",[s("strong",[a._v("ç©ºé—´æ•´åˆ")]),a._v("ï¼šG1è¿ä½œæœŸé—´ä¸ä¼šäº§ç”Ÿç©ºé—´ç¢ç‰‡ï¼Œæ”¶é›†åèƒ½æä¾›è§„æ•´çš„å¯ç”¨å†…å­˜ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("å¯é¢„æµ‹çš„åœé¡¿")]),a._v("ï¼šG1é™¤äº†è¿½æ±‚ä½åœé¡¿å¤–ï¼Œè¿˜èƒ½å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ã€‚èƒ½è®©ä½¿ç”¨è€…æ˜ç¡®æŒ‡å®šåœ¨ä¸€ä¸ªé•¿åº¦ä¸ºMæ¯«ç§’çš„æ—¶é—´æ®µå†…ï¼Œæ¶ˆè€—åœ¨åƒåœ¾æ”¶é›†ä¸Šçš„æ—¶é—´ä¸å¾—è¶…è¿‡Næ¯«ç§’ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("G1ä¸ºä»€ä¹ˆèƒ½å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹?")])]),a._v(" "),s("p",[a._v("å› ä¸ºå®ƒæœ‰è®¡åˆ’çš„é¿å…åœ¨æ•´ä¸ªJavaå †ä¸­è¿›è¡Œå…¨åŒºåŸŸçš„åƒåœ¾æ”¶é›†ã€‚G1è·Ÿè¸ªå„ä¸ªRegioné‡Œé¢çš„åƒåœ¾å †ç§¯çš„å¤§å°ï¼Œåœ¨åå°ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆåˆ—è¡¨ï¼Œæ¯æ¬¡æ ¹æ®å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶ä»·å€¼æœ€å¤§çš„Regionã€‚è¿™æ ·å°±ä¿è¯äº†åœ¨æœ‰é™çš„æ—¶é—´å†…å¯ä»¥è·å–å°½å¯èƒ½é«˜çš„æ”¶é›†æ•ˆç‡ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("G1ä¸å…¶ä»–æ”¶é›†å™¨çš„åŒºåˆ«ï¼š")])]),a._v(" "),s("p",[a._v("å…¶ä»–æ”¶é›†å™¨çš„å·¥ä½œèŒƒå›´æ˜¯æ•´ä¸ªæ–°ç”Ÿä»£æˆ–è€…è€å¹´ä»£ã€G1æ”¶é›†å™¨çš„å·¥ä½œèŒƒå›´æ˜¯æ•´ä¸ªJavaå †ã€‚åœ¨ä½¿ç”¨G1æ”¶é›†å™¨æ—¶ï¼Œå®ƒå°†æ•´ä¸ªJavaå †åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼ˆRegionï¼‰ã€‚è™½ç„¶ä¹Ÿä¿ç•™äº†æ–°ç”Ÿä»£ã€è€å¹´ä»£çš„æ¦‚å¿µï¼Œä½†æ–°ç”Ÿä»£å’Œè€å¹´ä»£ä¸å†æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œä»–ä»¬éƒ½æ˜¯ä¸€éƒ¨åˆ†Regionï¼ˆä¸éœ€è¦è¿ç»­ï¼‰çš„é›†åˆã€‚")]),a._v(" "),s("p",[s("strong",[a._v("G1æ”¶é›†å™¨å­˜åœ¨çš„é—®é¢˜ï¼š")])]),a._v(" "),s("p",[a._v("Regionä¸å¯èƒ½æ˜¯å­¤ç«‹çš„ï¼Œåˆ†é…åœ¨Regionä¸­çš„å¯¹è±¡å¯ä»¥ä¸Javaå †ä¸­çš„ä»»æ„å¯¹è±¡å‘ç”Ÿå¼•ç”¨å…³ç³»ã€‚åœ¨é‡‡ç”¨å¯è¾¾æ€§åˆ†æç®—æ³•æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»æ—¶ï¼Œå¾—æ‰«ææ•´ä¸ªJavaå †æ‰èƒ½ä¿è¯å‡†ç¡®æ€§ã€‚å…¶ä»–æ”¶é›†å™¨ä¹Ÿå­˜åœ¨è¿™ç§é—®é¢˜ï¼ˆG1æ›´åŠ çªå‡ºè€Œå·²ï¼‰ã€‚ä¼šå¯¼è‡´Minor GCæ•ˆç‡ä¸‹é™ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("G1æ”¶é›†å™¨æ˜¯å¦‚ä½•è§£å†³ä¸Šè¿°é—®é¢˜çš„?")]),a._v("ï¼Ÿ")]),a._v(" "),s("p",[a._v("é‡‡ç”¨Remembered Setæ¥é¿å…æ•´å †æ‰«æã€‚G1ä¸­æ¯ä¸ªRegionéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„Remembered Setï¼Œè™šæ‹Ÿæœºå‘ç°ç¨‹åºåœ¨å¯¹Referenceç±»å‹è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªWrite Barrieræš‚æ—¶ä¸­æ–­å†™æ“ä½œï¼Œæ£€æŸ¥Referenceå¼•ç”¨å¯¹è±¡æ˜¯å¦å¤„äºå¤šä¸ªRegionä¸­ï¼ˆå³æ£€æŸ¥è€å¹´ä»£ä¸­æ˜¯å¦å¼•ç”¨äº†æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œä¾¿é€šè¿‡CardTableæŠŠç›¸å…³å¼•ç”¨ä¿¡æ¯è®°å½•åˆ°è¢«å¼•ç”¨å¯¹è±¡æ‰€å±çš„Regionçš„Remembered Setä¸­ã€‚å½“è¿›è¡Œå†…å­˜å›æ”¶æ—¶ï¼Œåœ¨GCæ ¹èŠ‚ç‚¹çš„æšä¸¾èŒƒå›´ä¸­åŠ å…¥Remembered Setå³å¯ä¿è¯ä¸å¯¹å…¨å †è¿›è¡Œæ‰«æä¹Ÿä¸ä¼šæœ‰é—æ¼ã€‚")]),a._v(" "),s("p",[a._v("å¦‚æœä¸è®¡ç®—ç»´æŠ¤ Remembered Set çš„æ“ä½œï¼ŒG1æ”¶é›†å™¨å¤§è‡´å¯åˆ†ä¸ºå¦‚ä¸‹æ­¥éª¤ï¼š")]),a._v(" "),s("p",[s("strong",[a._v("åˆå§‹æ ‡è®°")]),a._v("ï¼šä»…æ ‡è®°GC Rootsèƒ½ç›´æ¥åˆ°çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¿®æ”¹TAMSï¼ˆNext Top at Mark Startï¼‰çš„å€¼ï¼Œè®©ä¸‹ä¸€é˜¶æ®µç”¨æˆ·ç¨‹åºå¹¶å‘è¿è¡Œæ—¶ï¼Œèƒ½åœ¨æ­£ç¡®å¯ç”¨çš„Regionä¸­åˆ›å»ºæ–°å¯¹è±¡ã€‚ï¼ˆéœ€è¦çº¿ç¨‹åœé¡¿ï¼Œä½†è€—æ—¶å¾ˆçŸ­ã€‚ï¼‰")]),a._v(" "),s("p",[s("strong",[a._v("å¹¶å‘æ ‡è®°")]),a._v("ï¼šä»GC Rootså¼€å§‹å¯¹å †ä¸­å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œæ‰¾å‡ºå­˜æ´»å¯¹è±¡ã€‚ï¼ˆè€—æ—¶è¾ƒé•¿ï¼Œä½†å¯ä¸ç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œï¼‰")]),a._v(" "),s("p",[s("strong",[a._v("æœ€ç»ˆæ ‡è®°")]),a._v("ï¼šä¸ºäº†ä¿®æ­£åœ¨å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºæ‰§è¡Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŒ–çš„é‚£ä¸€éƒ¨åˆ†æ ‡è®°è®°å½•ã€‚ä¸”å¯¹è±¡çš„å˜åŒ–è®°å½•åœ¨çº¿ç¨‹Remembered Set  Logsé‡Œé¢ï¼ŒæŠŠRemembered Set  Logsé‡Œé¢çš„æ•°æ®åˆå¹¶åˆ°Remembered Setä¸­ã€‚ï¼ˆéœ€è¦çº¿ç¨‹åœé¡¿ï¼Œä½†å¯å¹¶è¡Œæ‰§è¡Œã€‚ï¼‰")]),a._v(" "),s("p",[s("strong",[a._v("ç­›é€‰å›æ”¶")]),a._v("ï¼šå¯¹å„ä¸ªRegionçš„å›æ”¶ä»·å€¼å’Œæˆæœ¬è¿›è¡Œæ’åºï¼Œæ ¹æ®ç”¨æˆ·æ‰€æœŸæœ›çš„GCåœé¡¿æ—¶é—´æ¥åˆ¶å®šå›æ”¶è®¡åˆ’ã€‚ï¼ˆå¯å¹¶å‘æ‰§è¡Œï¼‰")]),a._v(" "),s("p",[a._v("G1æ”¶é›†å™¨è¿è¡Œç¤ºæ„å›¾ï¼š")]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/interviewtopic/jvm7.png",alt:"jvm"}})]),a._v(" "),s("h2",{attrs:{id:"gc-è°ƒä¼˜æ­¥éª¤"}},[a._v("GC è°ƒä¼˜æ­¥éª¤")]),a._v(" "),s("ol",[s("li",[a._v("æ‰“å°GCæ—¥å¿—")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("-XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -xloggc:./gc.log\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"tip custom-block"},[s("p",[a._v("-XX:+PrintGC è¾“å‡ºGCæ—¥å¿—\n-XX:+PrintGCDetails è¾“å‡ºGCçš„è¯¦ç»†æ—¥å¿—\n-XX:+PrintGCTimeStamps è¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥åŸºå‡†æ—¶é—´çš„å½¢å¼ï¼‰\n-XX:+PrintGCDateStamps è¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥æ—¥æœŸçš„å½¢å¼ï¼Œå¦‚ 2013-05-04T21:53:59.234+0800ï¼‰\n-XX:+PrintHeapAtGC åœ¨è¿›è¡ŒGCçš„å‰åæ‰“å°å‡ºå †çš„ä¿¡æ¯\n-Xloggc:../logs/gc.log æ—¥å¿—æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„")])]),a._v(" "),s("p",[a._v("Tomcat å¯ä»¥ç›´æ¥åŠ è½½JAVA_OPTSå˜é‡é‡Œ\n2. åˆ†ææ—¥å¿—å¾—åˆ°å…³é”®æ€§æŒ‡æ ‡\n3. åˆ†æGCåŸå› ï¼Œè°ƒä¼˜JVMå‚æ•°")]),a._v(" "),s("p",[a._v("æ¨èä½¿ç”¨ä¸€ä¸ªGCåˆ†æå·¥å…·"),s("a",{attrs:{href:"https://gceasy.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("GCeasy"),s("OutboundLink")],1),a._v("\nå°†ç”Ÿæˆçš„"),s("code",[a._v(".log")]),a._v("æ–‡ä»¶ ä¸Šä¼ ä¸Šå»å³å¯åˆ†æGCæ—¥å¿—")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("JVM å‚æ•° å®˜ç½‘"),s("OutboundLink")],1),a._v(" "),s("a",{attrs:{href:"https://www.jianshu.com/p/1c6b5c2e95f9",target:"_blank",rel:"noopener noreferrer"}},[a._v("Jvm ç®€ä¹¦æ€»ç»“"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("##2020-07-12 jvm åŠ å¼º")]),a._v(" "),s("h2",{attrs:{id:"è¡¥å……"}},[a._v("è¡¥å……")]),a._v(" "),s("ul",[s("li",[a._v("å…ƒç©ºé—´ï¼ˆ1.8ï¼‰ MetaSpace å ç”¨çš„æ˜¯æœåŠ¡å™¨çš„å†…å­˜")]),a._v(" "),s("li",[a._v("1.8ä¹‹å‰çš„ PermSpace ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºçš„å†…å­˜")])]),a._v(" "),s("h4",{attrs:{id:"æ€ä¹ˆç¡®å®šå¯¹è±¡æ˜¯åƒåœ¾ï¼Ÿ"}},[a._v("æ€ä¹ˆç¡®å®šå¯¹è±¡æ˜¯åƒåœ¾ï¼Ÿ")]),a._v(" "),s("p",[a._v("GC Root\n"),s("img",{attrs:{src:"/img/interviewtopic/jvm14.png",alt:"jvm"}})]),a._v(" "),s("h4",{attrs:{id:"ä»€ä¹ˆæ—¶å€™è¿›è¡Œåƒåœ¾å›æ”¶"}},[a._v("ä»€ä¹ˆæ—¶å€™è¿›è¡Œåƒåœ¾å›æ”¶")]),a._v(" "),s("ol",[s("li",[a._v("Eden æˆ–è€… SåŒº å†…å­˜ä¸å¤Ÿç”¨")]),a._v(" "),s("li",[a._v("è€å¹´ä»£ç©ºé—´ä¸å¤Ÿç”¨")]),a._v(" "),s("li",[a._v("æ–¹æ³•åŒºç©ºé—´ä¸å¤Ÿç”¨")]),a._v(" "),s("li",[a._v("System.gc()")])]),a._v(" "),s("h4",{attrs:{id:"æ€ä¹ˆè¿›è¡Œåƒåœ¾å›æ”¶"}},[a._v("æ€ä¹ˆè¿›è¡Œåƒåœ¾å›æ”¶")]),a._v(" "),s("ul",[s("li",[a._v("æ ‡è®°æ¸…æ¥šç®—æ³•ï¼Œä¼šåœ¨éå†GC Root çš„æ—¶å€™ï¼Œå°†å¯è¾¾çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼Œç„¶åå¯¹æœªæ ‡è®°çš„å¯¹è±¡è¿›è¡Œæ¸…æ¥š")])]),a._v(" "),s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[a._v("ç²¾é€‰æ–‡ç« ")]),a._v(" "),s("p",[a._v("https://www.cnblogs.com/cxxjohnson/p/8625713.html")])])])},[],!1,null,null,null);t.default=r.exports}}]);